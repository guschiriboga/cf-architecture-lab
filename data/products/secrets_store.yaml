id: secrets_store
name: Cloudflare Secrets Store
category: platform
summary: Securely encrypt and reuse account-level secrets across Cloudflare products without duplicating environment-specific configurations.
docs:
  homepage: https://developers.cloudflare.com/secrets-store/
  key_pages:
    - title: Manage account secrets
      url: https://developers.cloudflare.com/secrets-store/manage-secrets/
    - title: Use Secrets Store with Workers
      url: https://developers.cloudflare.com/secrets-store/integrations/workers/
    - title: Secrets Store access control
      url: https://developers.cloudflare.com/secrets-store/access-control/
capabilities:
  - Encrypt account-level secrets once and distribute them globally so services can fetch values without exposing plaintext to administrators.
  - Bind centrally managed secrets to Workers and other products so deployments consume consistent credentials without copying values per project.
  - Enforce fine-grained roles and API token scopes that separate creation, deployment, and read-only access to secret metadata.
how_it_works:
  model: Secrets Store keeps one account-level repository of encrypted strings that workloads reference by name through bindings.
  architecture:
    - When an authorized user or automation creates a secret, the value is encrypted and replicated across Cloudflare data centers for durable availability.
    - Wrangler, dashboard, or API workflows associate secrets with a store identifier so bindings in Worker configurations point to the correct record.
    - The platform exposes bindings to Workers through the env object, letting runtime code resolve the secret via asynchronous getters.
  execution:
    - Administrators create or rotate secrets using Wrangler commands, dashboard forms, or REST API endpoints tied to the store ID.
    - Workers attach a secrets_store_secrets binding in configuration, then call env.BINDING.get() during request handling to retrieve the decrypted value.
    - Audit logging captures create, update, duplicate, and delete operations so teams can monitor secret lifecycle events.
  consistency:
    - The store enforces a hard 1024-byte size limit and unique names per secret to maintain deterministic binding resolution.
    - Production secrets written with the --remote flag are the only ones counted against the 100-secret account quota, keeping local testing data isolated from shared stores.
supported_languages:
  runtimes:
    - Workers JavaScript and TypeScript via env bindings.
    - Workers Python runtime using the same env binding interface.
  sdks: []
  notes:
    - Secrets Store bindings surface as async-capable env values, so applications must await .get() before using credentials in downstream fetches.
usage_patterns:
  webpages:
    - pattern: Share API tokens across multiple Workers-backed pages without re-uploading secrets per project.
      steps:
        - Create account-level secrets in the dashboard or with wrangler secrets-store secret create using the Workers scope.
        - Add a Secrets Store binding for each Pages Function or Worker route that needs the shared credential.
        - Await env.BINDING.get() inside the handler before calling upstream APIs so each request receives the latest value.
  one_tier_apps:
    - pattern: Store third-party service keys centrally for single Worker APIs.
      steps:
        - Initialize a store (or use the automatically created one) and define secrets with descriptive names for each upstream integration.
        - Configure wrangler.toml with secrets_store_secrets entries that map bindings to store_id and secret_name pairs.
        - Deploy with wrangler deploy so the Worker fetch handler reads credentials from env without hard-coding values.
  multi_tier_apps:
    - pattern: Combine account secrets with Workers calling AI Gateway or other services that require shared keys across components.
      steps:
        - Grant deployers Secrets Store roles so they can bind secrets to Worker orchestrators and background jobs.
        - Use Wrangler or API automation to duplicate secrets into new scopes when workflows expand to additional services.
        - Monitor audit logs to confirm rotations reached every consumer before revoking previous credentials.
interactions:
  produces_bindings:
    - secrets_store_secrets
  consumes_bindings:
    - workers
  best_with:
    - product_id: workers
      reason: Workers bindings natively resolve account secrets with env.BINDING.get() so edge code can authenticate downstream APIs.
  anti_patterns:
    - Attempting to retrieve plaintext secret values from the dashboard or API after creation, which is intentionally blocked for security.
limits:
  quotas:
    - name: Secrets per account
      value: 100
      scope: Account
      plan: Open beta
    - name: Stores per account
      value: 1
      scope: Account
      plan: Open beta
  performance: []
  constraints:
    - name: Secret value size
      value: 1024 bytes
      note: Each secret must be a string no larger than 1024 bytes.
    - name: Secret naming rules
      value: No spaces in name
      note: Secret names cannot contain whitespace characters.
    - name: Regional availability
      value: Not available in China Network
      note: Secrets Store cannot be used on the Cloudflare China Network operated by JD Cloud.
free_tier:
  items: []
  notes:
    - Secrets Store is currently available in open beta for all accounts without separate metered pricing.
security_compliance:
  authz:
    - Role-based access control restricts create, edit, deploy, and read operations to specific Secrets Store roles or API scopes.
  isolation:
    - Secrets are encrypted and replicated across Cloudflare data centers while remaining inaccessible after creation except to bound services.
  data_residency:
    - Account stores are global but excluded from the Cloudflare China Network region.
  secrets:
    uses:
      - Bindings expose secrets only to Workers that declare a secrets_store_secrets binding, preventing accidental leakage elsewhere.
configuration:
  wrangler:
    bindings:
      - type: secrets_store_secrets
        key: API_KEY
        note: Declare the binding name, Secrets Store ID, and secret_name in wrangler.toml or wrangler.jsonc.
    example: |
      {
        "secrets_store_secrets": [
          {
            "binding": "PAYMENTS_KEY",
            "store_id": "<STORE_ID>",
            "secret_name": "PAYMENT_GATEWAY"
          }
        ]
      }
  cli:
    commands:
      - npx wrangler secrets-store store create <NAME> --remote
      - npx wrangler secrets-store secret create <STORE_ID> --name <SECRET_NAME> --scopes workers --remote
      - npx wrangler secrets-store store list
  api:
    endpoints:
      - method: POST
        path: /client/v4/accounts/{account_id}/secrets_store/stores/{store_id}/secrets
        note: Create secrets by sending name, value, scopes, and optional comment payloads.
      - method: DELETE
        path: /client/v4/accounts/{account_id}/secrets_store/stores/{store_id}/secrets/{secret_id}
        note: Remove secrets after confirming they are no longer deployed.
dev_experience:
  local_dev:
    - Use Wrangler without the --remote flag to create local-only secrets for development that do not count toward the production quota.
  testing:
    - Verify bindings with wrangler secrets-store secret list and review audit logs to confirm rotations occurred.
  ci_cd:
    - Automate secret creation and binding updates through API calls gated by Secrets Store token scopes in deployment pipelines.
migration_versioning:
  versioning:
    - Production secrets are tracked per store and counted separately from local development secrets created without --remote.
  migrations:
    - Update binding configuration and redeploy Workers immediately after rotating secrets so runtime code points to the new credential names.
cost_awareness:
  metering:
    - Secret usage is governed by per-account secret and store quotas during open beta instead of usage-based billing.
  design_tips:
    - Consolidate shared credentials into one store and reuse bindings to avoid hitting the 100-secret limit unnecessarily.
examples:
  minimal:
    description: Worker fetching a Payments API key from Secrets Store before making a request.
    files:
      - path: worker.js
        lang: javascript
        code: |
          export default {
            async fetch(request, env) {
              const apiKey = await env.PAYMENTS_KEY.get();
              const upstream = await fetch("https://api.example.com/orders", {
                headers: { Authorization: `Bearer ${apiKey}` },
              });
              return upstream.ok
                ? new Response(await upstream.text(), { status: 200 })
                : new Response("Upstream error", { status: upstream.status });
            },
          };
  advanced: []
glossary_refs:
  - Secrets Store
status: open_beta
changelog_highlights: []
sources:
  - url: https://developers.cloudflare.com/secrets-store/
    title: Overview · Cloudflare Secrets Store docs
    accessed: "2025-11-07"
    note: Product overview, availability, and integration summary.
  - url: https://developers.cloudflare.com/secrets-store/manage-secrets/
    title: Manage account secrets · Cloudflare Secrets Store docs
    accessed: "2025-11-07"
    note: Limit of 100 secrets, 1024-byte size, and production scope guidance.
  - url: https://developers.cloudflare.com/secrets-store/integrations/workers/
    title: Use Secrets Store with Workers · Cloudflare Secrets Store docs
    accessed: "2025-11-07"
    note: Binding configuration, env access patterns, and Wrangler examples.
  - url: https://developers.cloudflare.com/secrets-store/access-control/
    title: Secrets Store access control · Cloudflare Secrets Store docs
    accessed: "2025-11-07"
    note: RBAC roles and API token permissions for Secrets Store.
  - url: https://developers.cloudflare.com/secrets-store/audit-logs/
    title: Audit logs · Cloudflare Secrets Store docs
    accessed: "2025-11-07"
    note: Logged actions and monitoring guidance for secret lifecycle changes.
  - url: https://developers.cloudflare.com/secrets-store/manage-secrets/how-to/
    title: How to · Cloudflare Secrets Store docs
    accessed: "2025-11-07"
    note: CLI commands and API endpoints for creating, duplicating, and deleting secrets.
